"use strict";mejs.i18n.en["mejs.playlist"]="Toggle Playlist",mejs.i18n.en["mejs.playlist-prev"]="Previous",mejs.i18n.en["mejs.playlist-next"]="Next",mejs.i18n.en["mejs.playlist-loop"]="Loop",mejs.i18n.en["mejs.playlist-shuffle"]="Shuffle",Object.assign(mejs.MepDefaults,{playlist:[],showPlaylist:!0,autoClosePlaylist:!1,prevText:null,nextText:null,loopText:null,shuffleText:null,playlistTitle:null,currentMessage:null}),Object.assign(MediaElementPlayer.prototype,{buildplaylist(i,t,e,l){var s=mejs.i18n.t("mejs.playlist"),s=mejs.Utils.isString(i.options.playlistTitle)?i.options.playlistTitle:s;if(!i.createPlayList_()){if(i.currentPlaylistItem=0,i.originalControlsIndex=t.style.zIndex,t.style.zIndex=5,i.endedCallback=()=>{var t;i.currentPlaylistItem<i.listItems.length&&(t={},t=i.playlist[++i.currentPlaylistItem],i.setSrc(t.src),i.load(),setTimeout(()=>{i.play()},200))},l.addEventListener("ended",i.endedCallback),!i.isVideo){const o=document.createElement("div"),n=()=>{o.innerHTML="",void 0!==i.playlist[i.currentPlaylistItem]["data-playlist-thumbnail"]&&(o.innerHTML+=`<img tabindex="-1" src="${i.playlist[i.currentPlaylistItem]["data-playlist-thumbnail"]}">`),o.innerHTML+=`<p>${i.options.currentMessage||""} <span class="${i.options.classPrefix}playlist-current-title">${i.playlist[i.currentPlaylistItem].title}</span>`,void 0!==i.playlist[i.currentPlaylistItem].description&&(o.innerHTML+=` - <span class="${i.options.classPrefix}playlist-current-description">${i.playlist[i.currentPlaylistItem].description}</span>`),o.innerHTML+="</p>",i.resetSize()};o.className=`${i.options.classPrefix}playlist-current ${i.options.classPrefix}layer`,n(),e.insertBefore(o,e.firstChild),l.addEventListener("play",n)}if(i.options.showPlaylist){i.playlistLayer=document.createElement("div"),i.playlistLayer.className=`${i.options.classPrefix}playlist-layer  ${i.options.classPrefix}layer ${i.isVideo?`${i.options.classPrefix}playlist-hidden`:""} ${i.options.classPrefix}playlist-selector`,i.playlistLayer.innerHTML=`<ul class="${i.options.classPrefix}playlist-selector-list"></ul>`,e.insertBefore(i.playlistLayer,e.firstChild);for(let t=0,e=i.listItems.length;t<e;t++)i.playlistLayer.querySelector("ul").innerHTML+=i.listItems[t];if(i.isVideo)i.playlistButton=document.createElement("div"),i.playlistButton.className=`${i.options.classPrefix}button ${i.options.classPrefix}playlist-button`,i.playlistButton.innerHTML=`<button type="button" aria-controls="${i.id}" title="${s}" aria-label="${s}" tabindex="0"></button>`,i.playlistButton.addEventListener("click",function(){mejs.Utils.toggleClass(i.playlistLayer,`${i.options.classPrefix}playlist-hidden`)}),i.addControlElement(i.playlistButton,"playlist");else{var a=i.playlistLayer.querySelectorAll("li");if(a.length<=10){let l=0;for(let t=0,e=a.length;t<e;t++)l+=a[t].offsetHeight;i.container.style.height=`${l}px`}}const r=i.playlistLayer.querySelectorAll(`.${i.options.classPrefix}playlist-selector-list-item`),p=i.playlistLayer.querySelectorAll("input[type=radio]");for(let t=0,e=p.length;t<e;t++)p[t].disabled=!1,p[t].addEventListener("click",function(){const l=i.playlistLayer.querySelectorAll('input[type="radio"]'),s=i.playlistLayer.querySelectorAll(`.${i.options.classPrefix}playlist-selected`);for(let t=0,e=l.length;t<e;t++)l[t].checked=!1;for(let t=0,e=s.length;t<e;t++)mejs.Utils.removeClass(s[t],`${i.options.classPrefix}playlist-selected`),s[t].querySelector("label").querySelector("span").remove();this.checked=!0,this.closest(`.${i.options.classPrefix}playlist-selector-list-item`).querySelector("label").innerHTML=`<span>\u25B6</span> ${this.closest(`.${i.options.classPrefix}playlist-selector-list-item`).querySelector("label").innerHTML}`,mejs.Utils.addClass(this.closest(`.${i.options.classPrefix}playlist-selector-list-item`),`${i.options.classPrefix}playlist-selected`),i.currentPlaylistItem=this.getAttribute("data-playlist-index"),i.setSrc(this.value),i.load(),i.play(),i.isVideo&&!0===i.options.autoClosePlaylist&&mejs.Utils.toggleClass(i.playlistLayer,`${i.options.classPrefix}playlist-hidden`)});for(let t=0,e=r.length;t<e;t++)r[t].addEventListener("click",function(){const t=mejs.Utils.siblings(this.querySelector(`.${i.options.classPrefix}playlist-selector-label`),t=>"INPUT"===t.tagName)[0],e=mejs.Utils.createEvent("click",t);t.dispatchEvent(e)});i.keydownCallback=function(t){var e=mejs.Utils.createEvent("click",t.target);return t.target.dispatchEvent(e),!1},i.playlistLayer.addEventListener("keydown",function(t){var e=t.which||t.keyCode||0;~[13,32,38,40].indexOf(e)&&i.keydownCallback(t)})}else mejs.Utils.addClass(i.container,`${i.options.classPrefix}no-playlist`)}},cleanplaylist(t,e,l,s){s.removeEventListener("ended",t.endedCallback)},buildprevtrack(t){var e=mejs.i18n.t("mejs.playlist-prev"),e=mejs.Utils.isString(t.options.prevText)?t.options.prevText:e;t.prevButton=document.createElement("div"),t.prevButton.className=`${t.options.classPrefix}button ${t.options.classPrefix}prev-button`,t.prevButton.innerHTML=`<button type="button" aria-controls="${t.id}" title="${e}" aria-label="${e}" tabindex="0"></button>`,t.prevPlaylistCallback=()=>{t.playlist[--t.currentPlaylistItem]?(t.setSrc(t.playlist[t.currentPlaylistItem].src),t.load(),t.play()):++t.currentPlaylistItem},t.prevButton.addEventListener("click",t.prevPlaylistCallback),t.addControlElement(t.prevButton,"prevtrack")},cleanprevtrack(t){t.prevButton.removeEventListener("click",t.prevPlaylistCallback)},buildnexttrack(t){var e=mejs.i18n.t("mejs.playlist-next"),e=mejs.Utils.isString(t.options.nextText)?t.options.nextText:e;t.nextButton=document.createElement("div"),t.nextButton.className=`${t.options.classPrefix}button ${t.options.classPrefix}next-button`,t.nextButton.innerHTML=`<button type="button" aria-controls="${t.id}" title="${e}" aria-label="${e}" tabindex="0"></button>`,t.nextPlaylistCallback=()=>{t.playlist[++t.currentPlaylistItem]?(t.setSrc(t.playlist[t.currentPlaylistItem].src),t.load(),t.play()):--t.currentPlaylistItem},t.nextButton.addEventListener("click",t.nextPlaylistCallback),t.addControlElement(t.nextButton,"nexttrack")},cleannexttrack(t){t.nextButton.removeEventListener("click",t.nextPlaylistCallback)},buildloop(t){var e=mejs.i18n.t("mejs.playlist-loop"),e=mejs.Utils.isString(t.options.loopText)?t.options.loopText:e;t.loopButton=document.createElement("div"),t.loopButton.className=`${t.options.classPrefix}button ${t.options.classPrefix}loop-button ${t.options.loop?`${t.options.classPrefix}loop-on`:`${t.options.classPrefix}loop-off`}`,t.loopButton.innerHTML=`<button type="button" aria-controls="${t.id}" title="${e}" aria-label="${e}" tabindex="0"></button>`,t.loopCallback=()=>{t.options.loop=!t.options.loop,t.options.loop?(mejs.Utils.removeClass(t.loopButton,`${t.options.classPrefix}loop-off`),mejs.Utils.addClass(t.loopButton,`${t.options.classPrefix}loop-on`)):(mejs.Utils.removeClass(t.loopButton,`${t.options.classPrefix}loop-on`),mejs.Utils.addClass(t.loopButton,`${t.options.classPrefix}loop-off`))},t.loopButton.addEventListener("click",t.loopCallback),t.addControlElement(t.loopButton,"loop")},cleanloop(t){t.loopButton.removeEventListener("click",t.loopCallback)},buildshuffle(e){var t=mejs.i18n.t("mejs.playlist-shuffle"),t=mejs.Utils.isString(e.options.shuffleText)?e.options.shuffleText:t;e.shuffleButton=document.createElement("div"),e.shuffleButton.className=`${e.options.classPrefix}button ${e.options.classPrefix}shuffle-button ${e.options.classPrefix}shuffle-off`,e.shuffleButton.innerHTML=`<button type="button" aria-controls="${e.id}" title="${t}" aria-label="${t}" tabindex="0"></button>`,e.shuffleButton.style.display="none",e.media.addEventListener("play",()=>{e.shuffleButton.style.display="",e.resetSize()});let l=!1,s=[];const i=()=>{var t;e.options.loop||(t=Math.floor(Math.random()*e.playlist.length),-1===s.indexOf(t)?(e.setSrc(e.playlist[t].src),e.load(),e.play(),e.currentPlaylistItem=t,s.push(t)):s.length<e.playlist.length?e.shuffleCallback():s.length<e.playlist.length&&(s=[],e.currentPlaylistItem=t,s.push(t)))};e.shuffleCallback=()=>{l?(mejs.Utils.removeClass(e.shuffleButton,`${e.options.classPrefix}shuffle-on`),mejs.Utils.addClass(e.shuffleButton,`${e.options.classPrefix}shuffle-off`),l=!1,e.media.removeEventListener("ended",i)):(mejs.Utils.removeClass(e.shuffleButton,`${e.options.classPrefix}shuffle-off`),mejs.Utils.addClass(e.shuffleButton,`${e.options.classPrefix}shuffle-on`),l=!0,e.media.addEventListener("ended",i))},e.shuffleButton.addEventListener("click",e.shuffleCallback),e.addControlElement(e.shuffleButton,"shuffle")},cleanshuffle(t){t.shuffleButton.removeEventListener("click",t.shuffleCallback)},createPlayList_(){var l=this;if(l.playlist=l.options.playlist.length?l.options.playlist:l.mediaFiles&&l.mediaFiles.length?l.mediaFiles:[],!l.playlist.length){var s=l.media.originalNode.children;for(let t=0,e=s.length;t<e;t++){const i=s[t];if("source"===i.tagName.toLowerCase()){const a={};Array.prototype.slice.call(i.attributes).forEach(t=>{a[t.name]=t.value}),a.src&&a.type&&a.title&&(a.type=mejs.Utils.formatType(a.src,a.type),l.playlist.push(a))}}}if(!(l.playlist.length<2)){l.listItems=[];for(let t=0,e=l.playlist.length;t<e;t++){const o=l.playlist[t],n=document.createElement("li"),r=`${l.id}_playlist_item_${t}`,p=o["data-playlist-thumbnail"]?`<div class="${l.options.classPrefix}playlist-item-thumbnail"><img tabindex="-1" src="${o["data-playlist-thumbnail"]}"></div>`:"",c=o["data-playlist-description"]?`<div class="${l.options.classPrefix}playlist-item-description">${o["data-playlist-description"]}</div>`:"";n.tabIndex=0,n.className=`${l.options.classPrefix}playlist-selector-list-item${0===t?` ${l.options.classPrefix}playlist-selected`:""}`,n.innerHTML=`<div class="${l.options.classPrefix}playlist-item-inner">`+`${p}`+`<div class="${l.options.classPrefix}playlist-item-content">`+`<div><input type="radio" class="${l.options.classPrefix}playlist-selector-input" `+`name="${l.id}_playlist" id="${r}" data-playlist-index="${t}" value="${o.src}" disabled>`+`<label class="${l.options.classPrefix}playlist-selector-label" `+`for="${r}">${0===t?"<span>▶</span> ":""}${o.title||t}</label></div>${c}</div></div>`,l.listItems.push(n.outerHTML)}}}});
